
\chapter{\pricewars Platform Extension}

%problem + former state
This thesis develops a merchant that runs on the \pricewars platform and is exposed to the inventory and dynamic pricing problem.
The merchant competes against other merchants and makes automatic ordering and pricing decisions.
The platform in its original form did support pricing decisions.
The problem is that the platform did not support ordering decisions.
Merchants could order items from the producer but only one item at a time.
%motivation
This is an unrealistic setting.
Real merchants actually order multiple items at once to prevent high shipping costs.
But this leads to the inventory control problem.
Merchants have to decide at what point in time to order and how many items.
They have to keep customer demand in mind to avoid stock-outs.
This thesis extends the \pricewars platform by the inventory control problem.
This allows to simulate competitions of merchants, that make ordering and pricing decisions.
Different merchant strategies can be evaluated this way.

%new state + describe following structure
We added effects and costs to the platform that will influence merchants' ordering decisions.
These extensions are explained in the following sections.
The last two \cref{section:inventory_graph,section:benchmark_tool} present helpful additions to evaluate merchant performances.

\section{Ordering multiple Items}
\label{section:multiple_items}
First of all, merchants must be able to order multiple items in one order.
Some parts of the platform already supported this use case.
For example, expense and profit calculation for merchants already supported orders of multiple items.
However, there was no option to order more than one item from the producer.
By adding a parameter to the order request \texttt{POST /orders}, merchants can request their desired amount, e.g., \texttt{POST /orders?amount=14}.
Accordingly, the producer returns an order with that many items.
Ordering different product type with one order is not supported.

The option to order multiple items will not affect merchants' strategies.
They can still order a single item whenever they need one.
The next section introduces fixed order cost to discourage this behavior.

\section{Fixed Order Cost}
\label{section:fixed_order_cost}
Fixed order cost is a fixed value that is added to the total cost of each order.
Fixed order cost is comparable to shipping cost.
The total order cost from an order can be calculated with \cref{eq:order_cost}.
Merchants can reduce their fixed order costs by making few big orders.
They can request the size of the fixed order cost from the producer.

Besides the producer, the event aggregation service needs to know the total order cost to calculate merchants' profits and expenses.
The event aggregation service used to calculate the total order cost from the amount of ordered items and the cost per item.
The redundant order cost calculations may cause errors if the implementations are inconsistent.
To prevent these errors, only the producer calculates the cost and writes this information to the event.
The event analysis service becomes simpler and changing the order cost formula means only updating the producer.

\section{Holding Cost}
\label{section:holding_cost}
%architektur designentscheidung, warum ist lager im marketplace?
%flink

\section{Shipping Time}
\label{section:shipping_time}

\section{Inventory Graph}
\label{section:inventory_graph}

\section{Benchmark Tool}
\label{section:benchmark_tool}

%refactored + added inventory to example merchants